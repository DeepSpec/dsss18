<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DeepWeb.Spec.Vst.SocketSpecs</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DeepWeb.Spec.Vst.SocketSpecs</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">DeepWeb.Free.Monad</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#"><span class="id" title="library">Free</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#"><span class="id" title="library">Common</span></a> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#"><span class="id" title="library">Verif</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Lib.VstLib.html#"><span class="id" title="library">DeepWeb.Lib.VstLib</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Custom.Monad.html#"><span class="id" title="library">Custom.Monad</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="DeepWeb.Lib.Socket.html#"><span class="id" title="library">DeepWeb.Lib.Socket</span></a>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">SocketConstants</span>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">SocketAPI</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Spec.Vst.MainInit.html#"><span class="id" title="library">DeepWeb.Spec.Vst.MainInit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="SockAPIPred"><span class="id" title="module">SockAPIPred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SockAPIPred.SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a>: <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="definition">mpred</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">api_st</span>: <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="var">new_status</span>: <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.socket_status"><span class="id" title="inductive">socket_status</span></a>) : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">lookup_socket</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">fd'</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">:=</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">if</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">Z.eqb</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">(</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">descriptor</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">fd</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">)</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">(</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">descriptor</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">fd'</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">)</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">then</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">new_status</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">else</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">lookup_socket</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">api_st</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">fd'</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.Build_SocketMap"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SockAPIPred.lookup_update_socket_neq"><span class="id" title="lemma">lookup_update_socket_neq</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">api_st</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="var">new_status</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.socket_status"><span class="id" title="inductive">socket_status</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd'</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st"><span class="id" title="variable">api_st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#new_status"><span class="id" title="variable">new_status</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st"><span class="id" title="variable">api_st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#b4b39b4b0d7e7e7359e0985cb2b2cef5"><span class="id" title="notation">=?</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SockAPIPred.lookup_update_socket_eq"><span class="id" title="lemma">lookup_update_socket_eq</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">api_st</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="var">new_status</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.socket_status"><span class="id" title="inductive">socket_status</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd'</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st"><span class="id" title="variable">api_st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#new_status"><span class="id" title="variable">new_status</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#new_status"><span class="id" title="variable">new_status</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SockAPIPred.restore_update_socket"><span class="id" title="lemma">restore_update_socket</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">api_st0</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="var">st</span> <span class="id" title="var">st'</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.socket_status"><span class="id" title="inductive">socket_status</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st0"><span class="id" title="variable">api_st0</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">api_st1</span> := <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st0"><span class="id" title="variable">api_st0</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">api_st2</span> := <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st1"><span class="id" title="variable">api_st1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st0"><span class="id" title="variable">api_st0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#api_st2"><span class="id" title="variable">api_st2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">api_st0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lookup0</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hapi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fd0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#b4b39b4b0d7e7e7359e0985cb2b2cef5"><span class="id" title="notation">=?</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd0</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_descriptor"><span class="id" title="lemma">lookup_descriptor</span></a> <span class="id" title="var">api_st0</span> <span class="id" title="var">fd</span> <span class="id" title="var">fd0</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">lookup_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hapi</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">lookup_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SockAPIPred.update_socket_id"><span class="id" title="lemma">update_socket_id</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">st</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>) (<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred.update_socket_state"><span class="id" title="definition">update_socket_state</span></a>, <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fd'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#b4b39b4b0d7e7e7359e0985cb2b2cef5"><span class="id" title="notation">=?</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <span class="id" title="var">fd'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_descriptor"><span class="id" title="lemma">lookup_descriptor</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">api_st</span> := <span class="id" title="var">st</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SockAPIPred.consistent_world"><span class="id" title="definition">consistent_world</span></a> (<span class="id" title="var">st</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">fd1</span> <span class="id" title="var">fd2</span> <span class="id" title="var">id1</span> <span class="id" title="var">id2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd1"><span class="id" title="variable">fd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd2"><span class="id" title="variable">fd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#id2"><span class="id" title="variable">id2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd1"><span class="id" title="variable">fd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd2"><span class="id" title="variable">fd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#id2"><span class="id" title="variable">id2</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAPIPred"><span class="id" title="module">SockAPIPred</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="TracePred"><span class="id" title="module">TracePred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">TraceIncl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.socketE"><span class="id" title="definition">socketE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> {<span class="id" title="var">T</span>} (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">t'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">!!(</span><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t'"><span class="id" title="variable">t'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&amp;&amp;</span> <span class="id" title="definition">has_ext</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t'"><span class="id" title="variable">t'</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_pred_incl"><span class="id" title="lemma">trace_pred_incl</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t1"><span class="id" title="variable">t1</span></a> <span class="id" title="notation">|--</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t2"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Intro</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">entailer</span>!.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl_trans"><span class="id" title="lemma">trace_incl_trans</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_pred_eq"><span class="id" title="lemma">trace_pred_eq</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_eq"><span class="id" title="definition">trace_eq</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t2"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_eq"><span class="id" title="definition">TraceIncl.trace_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">pred_ext</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_incl"><span class="id" title="lemma">trace_pred_incl</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Interface&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.internal_nondet1"><span class="id" title="lemma">internal_nondet1</span></a>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">k1</span> <span class="id" title="var">k2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a>) (<span class="id" title="var">k3</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T2"><span class="id" title="variable">T2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Effect.html#NonDeterminism.or"><span class="id" title="definition">or</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k3"><span class="id" title="variable">k3</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <span class="id" title="notation">|--</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k3"><span class="id" title="variable">k3</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_incl"><span class="id" title="lemma">trace_pred_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_or_incl_bind"><span class="id" title="lemma">trace_or_incl_bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.internal_nondet2"><span class="id" title="lemma">internal_nondet2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">k1</span> <span class="id" title="var">k2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a>) (<span class="id" title="var">k3</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T2"><span class="id" title="variable">T2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Effect.html#NonDeterminism.or"><span class="id" title="definition">or</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k3"><span class="id" title="variable">k3</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <span class="id" title="notation">|--</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k3"><span class="id" title="variable">k3</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_incl"><span class="id" title="lemma">trace_pred_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_or_incl_bind"><span class="id" title="lemma">trace_or_incl_bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.internal_nondet3"><span class="id" title="lemma">internal_nondet3</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">k</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T2"><span class="id" title="variable">T2</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T1"><span class="id" title="variable">T1</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Effect.html#NonDeterminism.choose"><span class="id" title="definition">choose</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <span class="id" title="notation">|--</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#x"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_incl"><span class="id" title="lemma">trace_pred_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_choose_incl"><span class="id" title="lemma">trace_choose_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_bind_ret"><span class="id" title="lemma">trace_bind_ret</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">a</span> (<span class="id" title="var">f</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#a"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_eq"><span class="id" title="lemma">trace_pred_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_eq_incl2"><span class="id" title="lemma">trace_eq_incl2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl_eutt"><span class="id" title="lemma">trace_incl_eutt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_sym"><span class="id" title="lemma">eutt_sym</span></a> ]; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#leftId"><span class="id" title="lemma">leftId</span></a> .<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_bind_assoc"><span class="id" title="lemma">trace_bind_assoc</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">m</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> ( <span class="id" title="var">b</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">)</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#b"><span class="id" title="variable">b</span></a> ) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> ( <span class="id" title="var">a</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <span class="id" title="var">b</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#b"><span class="id" title="variable">b</span></a> ).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_eq"><span class="id" title="lemma">trace_pred_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl_eutt"><span class="id" title="lemma">trace_incl_eutt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_sym"><span class="id" title="lemma">eutt_sym</span></a> | ]; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#bindAssoc"><span class="id" title="lemma">bindAssoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_drop_tau"><span class="id" title="lemma">trace_drop_tau</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">k</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_eq"><span class="id" title="lemma">trace_pred_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl_eutt"><span class="id" title="lemma">trace_incl_eutt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_sym"><span class="id" title="lemma">eutt_sym</span></a> | ]; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#push_tau"><span class="id" title="lemma">push_tau</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_refl"><span class="id" title="lemma">eutt_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="TracePred.trace_bind_cancel"><span class="id" title="lemma">trace_bind_cancel</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">m</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Verif.html#EquivUpToTau"><span class="id" title="inductive">EquivUpToTau</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> ( <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#f"><span class="id" title="variable">f</span></a> ) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.ITREE"><span class="id" title="definition">ITREE</span></a> ( <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#g"><span class="id" title="variable">g</span></a> ).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred.trace_pred_eq"><span class="id" title="lemma">trace_pred_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_eq_incl2"><span class="id" title="lemma">trace_eq_incl2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl_eutt"><span class="id" title="lemma">trace_incl_eutt</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#cong_bind"><span class="id" title="lemma">cong_bind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_refl"><span class="id" title="lemma">eutt_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_refl"><span class="id" title="lemma">eutt_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Verif.html#eutt_sym"><span class="id" title="lemma">eutt_sym</span></a>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#TracePred"><span class="id" title="module">TracePred</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="FDSetPred"><span class="id" title="module">FDSetPred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="FDSetPred.insert_fd"><span class="id" title="definition">insert_fd</span></a> (<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="tactic">set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">List.existsb</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.fd_eqb"><span class="id" title="definition">fd_eqb</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="FDSetPred.remove_fd"><span class="id" title="definition">remove_fd</span></a> (<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>) (<span class="id" title="tactic">set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">fd'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.fd_eqb"><span class="id" title="definition">fd_eqb</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd'"><span class="id" title="variable">fd'</span></a>)) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> (<span class="id" title="var">fdset1</span> <span class="id" title="var">fdset2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">List.incl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset1"><span class="id" title="variable">fdset1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset2"><span class="id" title="variable">fdset2</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="FDSetPred.fd_subset_refl"><span class="id" title="lemma">fd_subset_refl</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">fd_set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>), <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set"><span class="id" title="variable">fd_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set"><span class="id" title="variable">fd_set</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#incl_refl"><span class="id" title="lemma">incl_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="FDSetPred.fd_subset_trans"><span class="id" title="lemma">fd_subset_trans</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">fd_set1</span> <span class="id" title="var">fd_set2</span> <span class="id" title="var">fd_set3</span>: <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set3"><span class="id" title="variable">fd_set3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set3"><span class="id" title="variable">fd_set3</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#incl_tran"><span class="id" title="lemma">incl_tran</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="FDSetPred.fd_subset_insert1"><span class="id" title="lemma">fd_subset_insert1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">fd_set1</span> <span class="id" title="var">fd_set2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) (<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.insert_fd"><span class="id" title="definition">insert_fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.insert_fd"><span class="id" title="definition">insert_fd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.fd_eqb"><span class="id" title="definition">fd_eqb</span></a> <span class="id" title="var">fd</span>)); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#incl_cons"><span class="id" title="lemma">incl_cons</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="FDSetPred.fd_subset_insert2"><span class="id" title="lemma">fd_subset_insert2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">fd_set1</span> <span class="id" title="var">fd_set2</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) (<span class="id" title="var">fd</span> : <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set1"><span class="id" title="variable">fd_set1</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.insert_fd"><span class="id" title="definition">insert_fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_set2"><span class="id" title="variable">fd_set2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.insert_fd"><span class="id" title="definition">insert_fd</span></a>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.fd_eqb"><span class="id" title="definition">fd_eqb</span></a> <span class="id" title="var">fd</span>)); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.fd_subset"><span class="id" title="definition">fd_subset</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#incl_tl"><span class="id" title="lemma">incl_tl</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Eval&nbsp;compute&nbsp;in&nbsp;(reptype&nbsp;(Tstruct&nbsp;_fd_set&nbsp;noattr)).<br/>
<br/>
&nbsp;&nbsp;Eval&nbsp;compute&nbsp;in&nbsp;(nested_field_type&nbsp;(Tstruct&nbsp;_fd_set&nbsp;noattr)&nbsp;<span class="inlinecode"></span>).<br/>
&nbsp;&nbsp;Eval&nbsp;compute&nbsp;in&nbsp;(reptype&nbsp;(Tstruct&nbsp;15*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="FDSetPred.rep_fd_set"><span class="id" title="axiom">rep_fd_set</span></a> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="definition">reptype</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="FDSetPred.FD_SET"><span class="id" title="definition">FD_SET</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sh</span> : <span class="id" title="definition">share</span>) (<span class="id" title="tactic">set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ptr</span> : <span class="id" title="inductive">val</span>) : <span class="id" title="definition">mpred</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">field_at</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.rep_fd_set"><span class="id" title="axiom">rep_fd_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ptr"><span class="id" title="variable">ptr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="FDSetPred.buffer_to_fd_set"><span class="id" title="axiom">buffer_to_fd_set</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">sh</span> : <span class="id" title="definition">share</span>) (<span class="id" title="var">ptr</span> : <span class="id" title="inductive">val</span>), <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">(</span></a><span class="id" title="tactic">set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at_</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ptr"><span class="id" title="variable">ptr</span></a> <span class="id" title="notation">|--</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ptr"><span class="id" title="variable">ptr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="FDSetPred.fd_set_to_buffer"><span class="id" title="lemma">fd_set_to_buffer</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">sh</span> : <span class="id" title="definition">share</span>) (<span class="id" title="tactic">set</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_Set"><span class="id" title="definition">FD_Set</span></a>) (<span class="id" title="var">ptr</span> : <span class="id" title="inductive">val</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set"><span class="id" title="variable">set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ptr"><span class="id" title="variable">ptr</span></a> <span class="id" title="notation">|--</span> <span class="id" title="definition">data_at_</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ptr"><span class="id" title="variable">ptr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred.FD_SET"><span class="id" title="definition">FD_SET</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="lemma">field_at__data_at</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">derives_trans</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">field_at_field_at_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FDSetPred"><span class="id" title="module">FDSetPred</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="SockAddr"><span class="id" title="module">SockAddr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="SockAddr.sockaddr"><span class="id" title="record">sockaddr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="SockAddr.sin_family"><span class="id" title="projection">sin_family</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> ; <a name="SockAddr.sin_port"><span class="id" title="projection">sin_port</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> ; <a name="SockAddr.sin_addr"><span class="id" title="projection">sin_addr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> }.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SockAddr.rep_sockaddr"><span class="id" title="definition">rep_sockaddr</span></a> (<span class="id" title="var">addr</span> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.sockaddr"><span class="id" title="record">sockaddr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">reptype</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_sockaddr_in"><span class="id" title="definition">_sockaddr_in</span></a> <span class="id" title="definition">noattr</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.sin_family"><span class="id" title="projection">sin_family</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.sin_port"><span class="id" title="projection">sin_port</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.sin_addr"><span class="id" title="projection">sin_addr</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">list_repeat</span> 8 (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> 0))<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)))</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SockAddr.rep_endpoint"><span class="id" title="definition">rep_endpoint</span></a> (<span class="id" title="var">id</span> : <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.endpoint_id"><span class="id" title="record">endpoint_id</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.rep_sockaddr"><span class="id" title="definition">rep_sockaddr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">sin_family</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">AF_INET</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">sin_port</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">port_number</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">id</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">sin_addr</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr.Build_sockaddr"><span class="id" title="constructor">0;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SockAddr"><span class="id" title="module">SockAddr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">TraceIncl</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">TracePred</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">FDSetPred</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SockAPIPred</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SockAddr</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="HoareSocket"><span class="id" title="section">HoareSocket</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="socket_spec"><span class="id" title="definition">socket_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_socket"><span class="id" title="definition">_socket</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">()</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span>                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> -1 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <span class="id" title="definition">Int.max_signed</span><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#162be8364124d2d389b2e8a3fc881ab2"><span class="id" title="notation">≥</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">fd</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ClosedSocket"><span class="id" title="constructor">ClosedSocket</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.OpenedSocket"><span class="id" title="constructor">OpenedSocket</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> -1 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="comment">(*&nbsp;shutdown&nbsp;never&nbsp;fails&nbsp;for&nbsp;now&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="shutdown_spec"><span class="id" title="definition">shutdown_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_shutdown"><span class="id" title="definition">_shutdown</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">t</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">client_conn</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">st</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a><span class="id" title="notation">;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> (<a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.shutdown"><span class="id" title="definition">shutdown</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a> <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>))) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> 2))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.OpenedSocket"><span class="id" title="constructor">OpenedSocket</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">;</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="close_spec"><span class="id" title="definition">close_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_close"><span class="id" title="definition">_close</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">st</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>))) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ClosedSocket"><span class="id" title="constructor">ClosedSocket</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="bind_spec"><span class="id" title="definition">bind_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_bind"><span class="id" title="definition">_bind</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">addr</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.endpoint_id"><span class="id" title="record">endpoint_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">addr_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">addr_len</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_sockaddr"><span class="id" title="definition">_sockaddr</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tuint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>))) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr_ptr"><span class="id" title="variable">addr_ptr</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 3%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr_len"><span class="id" title="variable">addr_len</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at</span> <span class="id" title="definition">Tsh</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_sockaddr_in"><span class="id" title="definition">_sockaddr_in</span></a> <span class="id" title="definition">noattr</span>) (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#rep_endpoint"><span class="id" title="definition">rep_endpoint</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr_ptr"><span class="id" title="variable">addr_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.OpenedSocket"><span class="id" title="constructor">OpenedSocket</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.BoundSocket"><span class="id" title="constructor">BoundSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at</span> <span class="id" title="definition">Tsh</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_sockaddr_in"><span class="id" title="definition">_sockaddr_in</span></a> <span class="id" title="definition">noattr</span>) (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#rep_endpoint"><span class="id" title="definition">rep_endpoint</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr_ptr"><span class="id" title="variable">addr_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="listen_spec"><span class="id" title="definition">listen_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_listen"><span class="id" title="definition">_listen</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">t</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">addr</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.endpoint_id"><span class="id" title="record">endpoint_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">backlog</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> (<a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.listen"><span class="id" title="definition">listen</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a> <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.BoundSocket"><span class="id" title="constructor">BoundSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>)))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#backlog"><span class="id" title="variable">backlog</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">result</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#YES"><span class="id" title="definition">YES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ListeningSocket"><span class="id" title="constructor">ListeningSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#addr"><span class="id" title="variable">addr</span></a>) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> ( <span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">end</span> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="accept_spec"><span class="id" title="definition">accept_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_accept"><span class="id" title="definition">_accept</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">t</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">server_addr</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.endpoint_id"><span class="id" title="record">endpoint_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_sockaddr"><span class="id" title="definition">_sockaddr</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tptr</span> <span class="id" title="definition">tuint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">]</span> <br/>
&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.accept"><span class="id" title="definition">accept</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#server_addr"><span class="id" title="variable">server_addr</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ListeningSocket"><span class="id" title="constructor">ListeningSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#server_addr"><span class="id" title="variable">server_addr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>))) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> <span class="id" title="definition">nullval</span> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 3%<span class="id" title="var">positive</span> <span class="id" title="definition">nullval</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">result</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.is_fd"><span class="id" title="axiom">is_fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <span class="id" title="definition">Int.max_signed</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">client_conn</span> <span class="id" title="var">client_fd</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_fd"><span class="id" title="variable">client_fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_fd"><span class="id" title="variable">client_fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ClosedSocket"><span class="id" title="constructor">ClosedSocket</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_fd"><span class="id" title="variable">client_fd</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">client_conn</span> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">client_conn</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="send_spec"><span class="id" title="definition">send_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_send"><span class="id" title="definition">_send</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">t</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">client_conn</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">msg</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">buf_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> <span class="id" title="definition">tvoid</span><span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tuint</span><span class="id" title="notation">,</span> 4%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">readable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a><span class="id" title="notation">;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l</span>, 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.send_any_prefix"><span class="id" title="definition">send_any_prefix</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>)))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 3%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>))))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 4%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a>) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">tarray</span> <span class="id" title="definition">tuchar</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">result</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <span class="id" title="notation">;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.OpenedSocket"><span class="id" title="constructor">OpenedSocket</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">tarray</span> <span class="id" title="definition">tuchar</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="recv_spec"><span class="id" title="definition">recv_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_recv"><span class="id" title="definition">_recv</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">t</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SocketM"><span class="id" title="definition">SocketM</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">client_conn</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fd</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">buf_ptr</span><span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">alloc_len</span><span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> 2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> <span class="id" title="definition">tvoid</span><span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tuint</span><span class="id" title="notation">,</span> 4%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.lookup_socket"><span class="id" title="projection">lookup_socket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.ConnectedSocket"><span class="id" title="constructor">ConnectedSocket</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.TraceIncl.trace_incl"><span class="id" title="definition">trace_incl</span></a> (<span class="id" title="var">r</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.NetworkInterface.html#Network.recv"><span class="id" title="definition">recv</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#client_conn"><span class="id" title="variable">client_conn</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a>) <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span><span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>)))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 3%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a>))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 4%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at_</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<span class="id" title="constructor">Tarray</span> <span class="id" title="definition">tuchar</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a> <span class="id" title="definition">noattr</span>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">result</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">contents</span><span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#NO"><span class="id" title="definition">NO</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#a1c07c706e79df7cc9eee5b1e369014a"><span class="id" title="notation">&gt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">msg</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> (<a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">sublist</span> 0 <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.VstLib.html#val_of_string"><span class="id" title="definition">val_of_string</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#msg"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">sublist</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">list_repeat</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#239a40728d107295b3cb2c790f57f9e9"><span class="id" title="notation">-</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="constructor">Vundef</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_repeat</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a>) <span class="id" title="constructor">Vundef</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#update_socket_state"><span class="id" title="definition">update_socket_state</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.OpenedSocket"><span class="id" title="constructor">OpenedSocket</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#273beba4f3453dbb29192b3ac740bb71"><span class="id" title="notation">&lt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_repeat</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a>) <span class="id" title="constructor">Vundef</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zcomplements.html#Zlength"><span class="id" title="definition">Zlength</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#consistent_world"><span class="id" title="definition">consistent_world</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#ITREE"><span class="id" title="definition">ITREE</span></a> (<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#result"><span class="id" title="variable">result</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#t"><span class="id" title="variable">t</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">msg_opt</span> ⇒ <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">msg_opt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">data_at</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<span class="id" title="definition">tarray</span> <span class="id" title="definition">tuchar</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#alloc_len"><span class="id" title="variable">alloc_len</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#contents"><span class="id" title="variable">contents</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#buf_ptr"><span class="id" title="variable">buf_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="select_spec"><span class="id" title="definition">select_spec</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_select"><span class="id" title="definition">_select</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">st</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">max_fd</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">read_set</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">write_set</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exception_set</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">read_set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">write_set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exception_set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">timeval_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">read_sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">write_sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exception_sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_timeval"><span class="id" title="definition">_timeval</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_sh"><span class="id" title="variable">read_sh</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_sh"><span class="id" title="variable">write_sh</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_sh"><span class="id" title="variable">exception_sh</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#max_fd"><span class="id" title="variable">max_fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#162be8364124d2d389b2e8a3fc881ab2"><span class="id" title="notation">≥</span></a> 0 <span class="comment">(*&nbsp;not&nbsp;really&nbsp;necessary,&nbsp;but&nbsp;safeguard&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#max_fd"><span class="id" title="variable">max_fd</span></a>))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 2%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set_ptr"><span class="id" title="variable">read_set_ptr</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 3%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set_ptr"><span class="id" title="variable">write_set_ptr</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 4%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set_ptr"><span class="id" title="variable">exception_set_ptr</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> 5%<span class="id" title="var">positive</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#timeval_ptr"><span class="id" title="variable">timeval_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_sh"><span class="id" title="variable">read_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set"><span class="id" title="variable">read_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set_ptr"><span class="id" title="variable">read_set_ptr</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_sh"><span class="id" title="variable">write_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set"><span class="id" title="variable">write_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set_ptr"><span class="id" title="variable">write_set_ptr</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_sh"><span class="id" title="variable">exception_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set"><span class="id" title="variable">exception_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set_ptr"><span class="id" title="variable">exception_set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">st'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.SocketMap"><span class="id" title="record">SocketMap</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">read_set'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">write_set'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">exception_set'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> -1 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#max_fd"><span class="id" title="variable">max_fd</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#273beba4f3453dbb29192b3ac740bb71"><span class="id" title="notation">&lt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set'"><span class="id" title="variable">read_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set"><span class="id" title="variable">read_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set'"><span class="id" title="variable">write_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set"><span class="id" title="variable">write_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set'"><span class="id" title="variable">exception_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set"><span class="id" title="variable">exception_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#162be8364124d2d389b2e8a3fc881ab2"><span class="id" title="notation">≥</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set'"><span class="id" title="variable">read_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set"><span class="id" title="variable">read_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set'"><span class="id" title="variable">write_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set"><span class="id" title="variable">write_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd_subset"><span class="id" title="definition">fd_subset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set'"><span class="id" title="variable">exception_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set"><span class="id" title="variable">exception_set</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">length</span></a> (<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set'"><span class="id" title="variable">read_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set'"><span class="id" title="variable">write_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set'"><span class="id" title="variable">exception_set'</span></a>)%<span class="id" title="var">list</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">fd</span> ⇒ <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#273beba4f3453dbb29192b3ac740bb71"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#max_fd"><span class="id" title="variable">max_fd</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set'"><span class="id" title="variable">read_set'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st"><span class="id" title="variable">st</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#SOCKAPI"><span class="id" title="axiom">SOCKAPI</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#st'"><span class="id" title="variable">st'</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_sh"><span class="id" title="variable">read_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set'"><span class="id" title="variable">read_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#read_set_ptr"><span class="id" title="variable">read_set_ptr</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_sh"><span class="id" title="variable">write_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set'"><span class="id" title="variable">write_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#write_set_ptr"><span class="id" title="variable">write_set_ptr</span></a> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_sh"><span class="id" title="variable">exception_sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set'"><span class="id" title="variable">exception_set'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#exception_set_ptr"><span class="id" title="variable">exception_set_ptr</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#HoareSocket"><span class="id" title="section">HoareSocket</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="HoareFD"><span class="id" title="section">HoareFD</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fd_zero_macro_spec"><span class="id" title="definition">fd_zero_macro_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_zero_macro"><span class="id" title="definition">_fd_zero_macro</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">fdset</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="constructor">Tvoid</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> : <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a>) <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fd_set_macro_spec"><span class="id" title="definition">fd_set_macro_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set_macro"><span class="id" title="definition">_fd_set_macro</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">fd</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fdset</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd"><span class="id" title="definition">_fd</span></a> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="definition">writable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <span class="id" title="notation">;</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#FD_SETSIZE"><span class="id" title="definition">FD_SETSIZE</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd"><span class="id" title="definition">_fd</span></a> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>))) <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="constructor">Tvoid</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">fdset'</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset'"><span class="id" title="variable">fdset'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#insert_fd"><span class="id" title="definition">insert_fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset'"><span class="id" title="variable">fdset'</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fd_isset_macro_spec"><span class="id" title="definition">fd_isset_macro_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_isset_macro"><span class="id" title="definition">_fd_isset_macro</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">fd</span><span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.sockfd"><span class="id" title="record">sockfd</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fdset</span> <span class="id" title="notation">:</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_Set"><span class="id" title="definition">FD_Set</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_ptr</span> <span class="id" title="notation">:</span> <span class="id" title="inductive">val</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sh</span><span class="id" title="notation">:</span> <span class="id" title="definition">share</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd"><span class="id" title="definition">_fd</span></a> <span class="id" title="notation">OF</span> <span class="id" title="definition">tint</span><span class="id" title="notation">,</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <span class="id" title="notation">OF</span> <span class="id" title="notation">(</span><span class="id" title="definition">tptr</span> (<span class="id" title="constructor">Tstruct</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd_set"><span class="id" title="definition">_fd_set</span></a> <span class="id" title="definition">noattr</span>)<span class="id" title="notation">)</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="definition">readable_share</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a><span class="id" title="notation">;</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="DeepWeb.Lib.SocketConstants.html#FD_SETSIZE"><span class="id" title="definition">FD_SETSIZE</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <a class="idref" href="DeepWeb.Spec.main.html#_fd"><span class="id" title="definition">_fd</span></a> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>)))<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">temp</span> <a class="idref" href="DeepWeb.Spec.main.html#_set"><span class="id" title="definition">_set</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tint</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">EX</span> <span class="id" title="var">r</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> <span class="id" title="definition">Int.min_signed</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <span class="id" title="definition">Int.max_signed</span> <span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a>)<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fd"><span class="id" title="variable">fd</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="DeepWeb.Lib.SocketInterface.html#SocketAPI.descriptor"><span class="id" title="projection">descriptor</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#r"><span class="id" title="variable">r</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#FD_SET"><span class="id" title="definition">FD_SET</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#sh"><span class="id" title="variable">sh</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#fdset"><span class="id" title="variable">fdset</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#set_ptr"><span class="id" title="variable">set_ptr</span></a> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#HoareFD"><span class="id" title="section">HoareFD</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="HoareInet"><span class="id" title="section">HoareInet</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="htons_spec"><span class="id" title="definition">htons_spec</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">DECLARE</span> <a class="idref" href="DeepWeb.Spec.main.html#_htons"><span class="id" title="definition">_htons</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">WITH</span> <span class="id" title="var">n</span> <span class="id" title="notation">:</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">PRE</span> <span class="id" title="notation">[</span> 1%<span class="id" title="var">positive</span> <span class="id" title="notation">OF</span> <span class="id" title="definition">tushort</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> 16 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#239a40728d107295b3cb2c790f57f9e9"><span class="id" title="notation">-</span></a> 1 <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> 1%<span class="id" title="var">positive</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#n"><span class="id" title="variable">n</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">POST</span> <span class="id" title="notation">[</span> <span class="id" title="definition">tushort</span> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">PROP</span> <span class="id" title="notation">(</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> 16 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.ZArith.BinInt.html#239a40728d107295b3cb2c790f57f9e9"><span class="id" title="notation">-</span></a> 1 <span class="comment">(*&nbsp;to&nbsp;typecheck&nbsp;return&nbsp;value&nbsp;*)</span> <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">LOCAL</span> <span class="id" title="notation">(</span> <span class="id" title="constructor">temp</span> <span class="id" title="definition">ret_temp</span> (<span class="id" title="constructor">Vint</span> (<span class="id" title="definition">Int.repr</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#n"><span class="id" title="variable">n</span></a>)) <span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">SEP</span> <span class="id" title="notation">(</span> <span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#HoareInet"><span class="id" title="section">HoareInet</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
Ltac&nbsp;forward_select&nbsp;max_fd&nbsp;rs&nbsp;ws&nbsp;es&nbsp;timeval_ptr&nbsp;:=<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[<span class="id" title="var">SOCKAPI</span></span> <span class="inlinecode">?<span class="id" title="var">st</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[<span class="id" title="var">FD_SET</span></span> <span class="inlinecode">?<span class="id" title="var">read_sh</span></span> <span class="inlinecode"><span class="id" title="var">rs</span></span> <span class="inlinecode">?<span class="id" title="var">read_set_ptr</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[<span class="id" title="var">FD_SET</span></span> <span class="inlinecode">?<span class="id" title="var">write_sh</span></span> <span class="inlinecode"><span class="id" title="var">ws</span></span> <span class="inlinecode">?<span class="id" title="var">write_set_ptr</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[<span class="id" title="var">FD_SET</span></span> <span class="inlinecode">?<span class="id" title="var">exception_sh</span></span> <span class="inlinecode">?<span class="id" title="var">exception_set_ptr</span></span> <span class="inlinecode"><span class="id" title="var">es</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;fds_in_read_set&nbsp;with&nbsp;(fds_in&nbsp;rs);&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;forward_call&nbsp;(st,&nbsp;max_fd,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rs,&nbsp;ws,&nbsp;es,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read_set_ptr,&nbsp;write_set_ptr,&nbsp;exception_set_ptr,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeval_ptr,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read_sh,&nbsp;write_sh,&nbsp;exception_sh)&nbsp;<span class="comment">(*&nbsp;|&nbsp;auto]&nbsp;*)</span><br/>
&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;end.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="socket_specs"><span class="id" title="definition">socket_specs</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#socket_spec"><span class="id" title="definition">socket_spec</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#bind_spec"><span class="id" title="definition">bind_spec</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#listen_spec"><span class="id" title="definition">listen_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#accept_spec"><span class="id" title="definition">accept_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#recv_spec"><span class="id" title="definition">recv_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#send_spec"><span class="id" title="definition">send_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#select_spec"><span class="id" title="definition">select_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#close_spec"><span class="id" title="definition">close_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Spec.Vst.SocketSpecs.html#shutdown_spec"><span class="id" title="definition">shutdown_spec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>